<style type="text/css">
  legend{border-bottom: 0px;}
</style>
<div class="crumb-wrap">
    <div class="crumb-list"><i class="icon-font"></i><a href="/public/index">RBAC</a><span class="crumb-step">&gt;</span><a href="/weserver/node/index">节点管理</a><span class="crumb-step">&gt;</span><span class="crumb-name">添加节点</span></div>
</div>
<div class="am-g">
  <div class="am-u-lg-6">
    <form action="addnode?action=add" class="am-form" method="post" data-am-validator>
      <fieldset>
        <legend></legend>
        <div class="am-form-group">
          <label for="doc-vld-name-2">Name：</label>
          <input type="text" name="Name" id="doc-vld-name-2" minlength="3" placeholder="请输入名称" required/>
        </div>

        <div class="am-form-group">
          <label for="doc-vld-email-2">显示名称：</label>
          <input type="text" name="Title" id="doc-vld-email-2" placeholder="输入显示名称" required/>
        </div>
        
        <div class="am-form-group">
          <label for="doc-select-1">分组</label>
          <select id="doc-select-1" onchange="changeGroup()" name="Group" required>
            <option value="">-=请选择一项=-</option>
            {{range .group}}
            <option value="{{.Id}}">{{.Title}}</option>
            {{end}}
          </select>
          <span class="am-form-caret"></span>
        </div>

        <div class="am-form-group">
          <label for="doc-select-2">上级菜单</label>
          <select id="doc-select-2" name="Pid">
            <option value="">-=请选择一项=-</option>
          </select>
          <span class="am-form-caret"></span>
        </div>

        <div class="am-form-group">
          <label for="doc-vld-age-2">链接：</label>
          <input type="text" name="Url" id="doc-vld-age-2" placeholder="输入链接如：rbac/user/index" min="6" required />
        </div>

        <div class="am-form-group">
          <label for="doc-vld-ta-2">排序：</label>
          <input type="text" name="Sort" id="doc-vld-age-2" placeholder="输入排序" min="6" required />
        </div>

        <div class="am-form-group">
          <label>状态： </label>
          <label class="am-radio-inline">
            <input type="radio"  value="1" name="Status" required checked> 开启
          </label>
          <label class="am-radio-inline">
            <input type="radio" value="2" name="Status"> 关闭
          </label>
        </div>
        
        <div class="am-form-group">
          <label>节点： </label>
          <label class="am-radio-inline">
            <input type="radio"  value="1" name="Hide" required checked>显示
          </label>
          <label class="am-radio-inline">
            <input type="radio" value="2" name="Hide"> 隐藏
          </label>
        </div>

        <div class="am-form-group">
          <label for="doc-vld-ta-2">备注：</label>
          <textarea id="doc-vld-ta-2" name="Remark"></textarea>
        </div>

        <button class="am-btn am-btn-secondary" type="submit">提交</button>
      </fieldset>
    </form>
  </div>
</div>
<script type="text/javascript">
  function changeGroup(){
    var groupid = $("#doc-select-1").val();
    var infoText = "<option value=''>-=请选择一项=-</option>"
    $.ajax({
      url: '/weserver/node/getnodetree',
      type: 'POST',
      data: {Gid: groupid},
      success: function(rsp){
        if (rsp.status){
          $.each(rsp.tree, function(i, item) {
              infoText = infoText + "<option value='" + item.Id + "'>"+ item.text +"</option>";
              $.each(item.menu, function(is, items) {
                  infoText = infoText + "<option value='"+ items.Id +"'>&nbsp&nbsp└"+ items.text +"</option>"
              })
          });
        }
        $("#doc-select-2").html(infoText);
      }
    })
  }
</script>